(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{457:function(t,n,s){"use strict";s.r(n);var a=s(53),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nodejs之fs模块学习笔记"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nodejs之fs模块学习笔记"}},[t._v("#")]),t._v(" NodeJS之fs模块学习笔记")]),t._v(" "),s("p",[s("img",{attrs:{src:"E:%5Cblog%5Cimages%5Cnode%5Cfs.png",alt:"fs文件系统模块"}})]),t._v(" "),s("h2",{attrs:{id:"_1-fs简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-fs简介"}},[t._v("#")]),t._v(" 1.fs简介")]),t._v(" "),s("p",[t._v("fs全称"),s("code",[t._v("file system")]),t._v(",文件系统，是NodeJS中最强大的API之一，提供了用于文件系统进行交互的各种API。")]),t._v(" "),s("h2",{attrs:{id:"_2-使用方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用方式"}},[t._v("#")]),t._v(" 2.使用方式")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("所有的文件系统操作都具有"),s("strong",[t._v("同步")]),t._v("（一般以'Sync'结尾的API）和"),s("strong",[t._v("异步")]),t._v("的形式。")]),t._v(" "),s("p",[t._v("异步的形式总是把完成回调作为其最后一个参数。 传给完成回调的参数取决于具体方法，但第一个参数总是预留给异常。 如果操作被成功地完成，则第一个参数会为 "),s("code",[t._v("null")]),t._v(" 或 "),s("code",[t._v("undefined")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlink")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'已成功地删除文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("当使用同步的操作时，发生的异常会被立即地抛出，可以使用 "),s("code",[t._v("try…catch")]),t._v(" 处理，也可以冒泡。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlinkSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'已成功地删除文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理错误")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_3-创建目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建目录"}},[t._v("#")]),t._v(" 3. 创建目录")]),t._v(" "),s("h3",{attrs:{id:"_3-1-fs-mkdir-path-options-callback-异步创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-fs-mkdir-path-options-callback-异步创建"}},[t._v("#")]),t._v(" 3.1 "),s("code",[t._v("fs.mkdir(path[, options], callback)")]),t._v("异步创建")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(": 文件目录路径")]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("recursive")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("false")]),t._v("。指示是否要创建父目录。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 在 Windows 上不支持， "),s("strong",[t._v("mode")]),t._v(" -- 权限模式。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o777")]),t._v("（linux系统下：所有人、所属组、其他人可读可写可执行）。")])])]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("err")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/qZ873x",target:"_blank",rel:"noopener noreferrer"}},[s("Error",[s("OutboundLink")],1)],1)])])])]),t._v(" "),s("p",[t._v("异步地创建目录。")]),t._v(" "),s("p",[t._v("回调会传入可能的异常、以及创建的第一个目录的路径（如果 "),s("code",[t._v("recursive")]),t._v(" 为 "),s("code",[t._v("true")]),t._v("）， "),s("code",[t._v("(err, [path])")]),t._v("。")]),t._v(" "),s("p",[t._v("可选的 "),s("code",[t._v("options")]),t._v(" 参数可以是整数（指定 "),s("code",[t._v("mode")]),t._v("（权限和粘滞位））、或对象（具有 "),s("code",[t._v("mode")]),t._v(" 属性和 "),s("code",[t._v("recursive")]),t._v(" 属性（指示是否要创建父目录））。 当 "),s("code",[t._v("path")]),t._v(" 是已存在的目录时，调用 "),s("code",[t._v("fs.mkdir()")]),t._v(" 仅在 "),s("code",[t._v("recursive")]),t._v(" 为 false 时才会导致错误。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 异步创建文件目录\n * */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fsDir'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须设置recursive: true 才能创建父目录")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test/fsDir'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("recursive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("在 Windows 上，对根目录使用 "),s("code",[t._v("fs.mkdir()")]),t._v("（即使使用遍历）也会导致错误：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" recursive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => [Error: EPERM: operation not permitted, mkdir 'C:\\']")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-2-fs-mkdirsync-path-options-同步创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-fs-mkdirsync-path-options-同步创建"}},[t._v("#")]),t._v(" 3.2 "),s("code",[t._v("fs.mkdirSync(path[, options])")]),t._v("同步创建")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("recursive")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("false")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 在 Windows 上不支持， "),s("strong",[t._v("mode")]),t._v(" -- 权限模式。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o777")]),t._v("（linux系统下：所有人、所属组、其他人可读可写可执行）。")])])]),t._v(" "),s("li",[t._v("返回: "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/8ym6ow",target:"_blank",rel:"noopener noreferrer"}},[s("undefined",[s("OutboundLink")],1)],1)])]),t._v(" "),s("p",[t._v("同步地创建目录，参数和异步创建目录少了一个回调函数，其余参数相同。 返回 "),s("code",[t._v("undefined")]),t._v("，或创建的第一个目录的路径（如果 "),s("code",[t._v("recursive")]),t._v(" 为 "),s("code",[t._v("true")]),t._v("）。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 同步创建目录\n * */")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dirPath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdirSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test/fsDirSync'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" recursive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("h3",{attrs:{id:"_3-3-fs-mkdtemp-prefix-options-callback-异步创建临时目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-fs-mkdtemp-prefix-options-callback-异步创建临时目录"}},[t._v("#")]),t._v(" 3.3 "),s("code",[t._v("fs.mkdtemp(prefix[, options], callback)")]),t._v(" 异步创建临时目录")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("prefix")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 目录名称-前缀。默认会再这个前缀后面接上六位随机的字符，保证创建的临时性目录有唯一性")]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v("  指定编码，参数值为："),s("code",[t._v("'utf-8'")]),t._v(" 或者 "),s("code",[t._v("{encoding: 'utf-8'}")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'utf8'")]),t._v("。")])])]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("err")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/qZ873x",target:"_blank",rel:"noopener noreferrer"}},[s("Error",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("directory")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1)])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" os "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'os'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取根目录Temp文件路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tmpDir "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tmpdir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdtemp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tmpDir"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'目录-'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" directory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("directory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印类似: /tmp/目录-9jEV66(linux) 或 C:\\Users\\...\\AppData\\Local\\Temp\\目录-9jEV66(windows)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 將临时目录创建到指定目录下")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sep "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdtemp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("testDir")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("sep"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" directory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("directory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出类似 `/tmp/abc123`。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新的临时目录会被创建在 /tmp 目录中。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[s("a",{attrs:{href:"https://segmentfault.com/q/1010000010321645",target:"_blank",rel:"noopener noreferrer"}},[t._v("nodejs中通过fs.mkdtemp 创建的临时目录会自动删除么？"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_3-4-fs-mkdtempsync-prefix-options-同步创建临时目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-fs-mkdtempsync-prefix-options-同步创建临时目录"}},[t._v("#")]),t._v(" 3.4 "),s("code",[t._v("fs.mkdtempSync(prefix[, options])")]),t._v("同步创建临时目录")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("prefix")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'utf8'")]),t._v("。")])])]),t._v(" "),s("li",[t._v("返回: "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 返回创建的目录路径。")])]),t._v(" "),s("h2",{attrs:{id:"_4-追加文件（不存在则创建文件）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-追加文件（不存在则创建文件）"}},[t._v("#")]),t._v(" 4.追加文件（不存在则创建文件）")]),t._v(" "),s("h3",{attrs:{id:"_4-1-fs-appendfile-path-data-options-callback-异步追加文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-fs-appendfile-path-data-options-callback-异步追加文件"}},[t._v("#")]),t._v(" 4.1 "),s("code",[t._v("fs.appendFile(path, data[, options], callback)")]),t._v("异步追加文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("number",[s("OutboundLink")],1)],1),t._v(" 文件名或文件描述符。")]),t._v(" "),s("li",[s("code",[t._v("data")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[s("null",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'utf8'")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o666")]),t._v("。文件权限")]),t._v(" "),s("li",[s("code",[t._v("flag")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'a'")]),t._v("。")])])]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("err")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/qZ873x",target:"_blank",rel:"noopener noreferrer"}},[s("Error",[s("OutboundLink")],1)],1)])])])]),t._v(" "),s("p",[t._v("异步地追加数据到文件，如果文件尚不存在则创建文件。 "),s("code",[t._v("data")]),t._v(" 可以是字符串或 "),s("a",{attrs:{href:"http://nodejs.cn/s/FApxjh",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Buffer")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'追加的数据'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据已被追加到文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("如果 "),s("code",[t._v("options")]),t._v(" 是字符串，则它指定字符编码：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'追加的数据'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("code",[t._v("path")]),t._v(" 可以指定为已打开用于追加（使用 "),s("code",[t._v("fs.open()")]),t._v(" 或 "),s("code",[t._v("fs.openSync()")]),t._v("）的数字型文件描述符。 文件描述符不会自动关闭。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'追加的数据'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_4-2-fs-appendfilesync-path-data-options-同步追加文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-fs-appendfilesync-path-data-options-同步追加文件"}},[t._v("#")]),t._v(" 4.2 "),s("code",[t._v("fs.appendFileSync(path, data[, options])")]),t._v("同步追加文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("number",[s("OutboundLink")],1)],1),t._v(" 文件名或文件描述符。")]),t._v(" "),s("li",[s("code",[t._v("data")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[s("null",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'utf8'")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o666")]),t._v("。文件权限")]),t._v(" "),s("li",[s("code",[t._v("flag")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'a'")]),t._v("。")])])])]),t._v(" "),s("p",[t._v("同步地将数据追加到文件，如果文件不存在则创建该文件。 "),s("code",[t._v("data")]),t._v(" 可以是字符串或 "),s("a",{attrs:{href:"http://nodejs.cn/s/FApxjh",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Buffer")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'追加的数据'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据已被追加到文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 处理错误 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("如果 "),s("code",[t._v("options")]),t._v(" 是字符串，则它指定字符编码：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'追加的数据'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("code",[t._v("path")]),t._v(" 可以指定为已打开用于追加（使用 "),s("code",[t._v("fs.open()")]),t._v(" 或 "),s("code",[t._v("fs.openSync()")]),t._v("）的数字型文件描述符。 文件描述符不会自动关闭。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" fd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("openSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'追加的数据'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 处理错误 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("closeSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_5-打开文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-打开文件"}},[t._v("#")]),t._v(" *5. 打开文件")]),t._v(" "),s("h3",{attrs:{id:"_5-1-fs-open-path-flags-mode-callback-异步打开文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-fs-open-path-flags-mode-callback-异步打开文件"}},[t._v("#")]),t._v(" 5.1  "),s("code",[t._v("fs.open(path[, flags[, mode]], callback)")]),t._v("异步打开文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("flags")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("number",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。 "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'r'")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o666")]),t._v("（可读写）。")]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("err")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/qZ873x",target:"_blank",rel:"noopener noreferrer"}},[s("Error",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("fd")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 文件描述符的整数")])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'打开文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dir"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一般不这样使用而是直接使用 fs.readFile")]),t._v("\n    fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_5-2-fs-opensync-path-flags-mode-同步打开文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-fs-opensync-path-flags-mode-同步打开文件"}},[t._v("#")]),t._v(" 5.2 "),s("code",[t._v("fs.openSync(path[, flags, mode])")]),t._v("同步打开文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("flags")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("number",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。 "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'r'")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o666")]),t._v("（可读写）。")]),t._v(" "),s("li",[t._v("返回: "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("number",[s("OutboundLink")],1)],1),t._v("返回表示文件描述符的整数。")])]),t._v(" "),s("h3",{attrs:{id:"_5-3-为什么不使用它们？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-为什么不使用它们？"}},[t._v("#")]),t._v(" 5.3 为什么不使用它们？")]),t._v(" "),s("p",[t._v("源码解读：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fs.open方法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  binding.open方法")]),t._v("\n  binding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toNamespacedPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               flagsNumber"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fs.readFile")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getValidatedPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  binding.open方法")]),t._v("\n  binding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toNamespacedPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringToFlags")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("flag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0o666")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fs.write")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里调用了fs.open")]),t._v("\n  fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("openErr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("openErr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("openErr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeFd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("从源码中可以看出，一般直接使用"),s("code",[t._v("fs.readFile")]),t._v("等方式直接操作文件即可，因为他们都之间或间接的使用了"),s("code",[t._v("open")]),t._v("方法。")]),t._v(" "),s("h2",{attrs:{id:"_6-读取文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-读取文件"}},[t._v("#")]),t._v(" 6. 读取文件")]),t._v(" "),s("h3",{attrs:{id:"_6-1-fs-readfile-path-options-callback-异步读取文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-fs-readfile-path-options-callback-异步读取文件"}},[t._v("#")]),t._v(" 6.1 "),s("code",[t._v("fs.readFile(path[, options], callback)")]),t._v("异步读取文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 文件名或文件描述符。")]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[s("null",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("null")]),t._v("。字符编码")]),t._v(" "),s("li",[s("code",[t._v("flag")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'r'")]),t._v("。")])])]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("err")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/qZ873x",target:"_blank",rel:"noopener noreferrer"}},[s("Error",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("data")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" 如果没有指定字符编码，则返回原始的 buffer。")])])])]),t._v(" "),s("p",[t._v("异步地读取文件的全部内容。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件名'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("code",[t._v("fs.readFile()")]),t._v(" 函数会缓冲整个文件。 若要最小化内存成本，则尽可能选择流式（使用 "),s("code",[t._v("fs.createReadStream()")]),t._v("）。")]),t._v(" "),s("h3",{attrs:{id:"_6-2-fs-readfilesync-path-options-同步读取文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-fs-readfilesync-path-options-同步读取文件"}},[t._v("#")]),t._v(" 6.2 "),s("code",[t._v("fs.readFileSync(path[, options])")]),t._v("同步读取文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 文件名或文件描述符。")]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("OutboundLink")],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[s("null",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("null")]),t._v("。字符编码")]),t._v(" "),s("li",[s("code",[t._v("flag")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'r'")]),t._v("。")])])]),t._v(" "),s("li",[t._v("返回: "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("buffer",[s("OutboundLink")],1)],1),t._v(" 返回 "),s("code",[t._v("path")]),t._v(" 的内容。如果指定了 "),s("code",[t._v("encoding")]),t._v(" 选项，则此函数返回字符串。 否则，返回 buffer。")])]),t._v(" "),s("h2",{attrs:{id:"_7-写入文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-写入文件"}},[t._v("#")]),t._v(" 7. 写入文件")]),t._v(" "),s("h3",{attrs:{id:"_7-1fs-writefile-file-data-options-callback-异步写入文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-1fs-writefile-file-data-options-callback-异步写入文件"}},[t._v("#")]),t._v(" 7.1"),s("code",[t._v("fs.writeFile(file, data[, options], callback)")]),t._v("异步写入文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("file")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 文件名或文件描述符。")]),t._v(" "),s("li",[s("code",[t._v("data")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/oh3CkV",target:"_blank",rel:"noopener noreferrer"}},[s("TypedArray",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/yCdVkD",target:"_blank",rel:"noopener noreferrer"}},[s("DataView",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[s("null",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'utf8'")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o666")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("flag")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。 "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'w'")]),t._v("。")])])]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("err")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/qZ873x",target:"_blank",rel:"noopener noreferrer"}},[s("Error",[s("OutboundLink")],1)],1)])])])]),t._v(" "),s("p",[t._v("当 "),s("code",[t._v("file")]),t._v(" 是文件名时，则异步地写入数据到文件（如果文件已存在，则覆盖文件）。 "),s("code",[t._v("data")]),t._v(" 可以是字符串或 buffer。")]),t._v(" "),s("p",[t._v("当 "),s("code",[t._v("file")]),t._v(" 是文件描述符时，则其行为类似于直接调用 "),s("code",[t._v("fs.write()")]),t._v("（建议使用）。 参见以下关于使用文件描述符的说明。")]),t._v(" "),s("p",[t._v("如果 "),s("code",[t._v("data")]),t._v(" 是 buffer，则 "),s("code",[t._v("encoding")]),t._v(" 选项会被忽略。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uint8Array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Node.js 中文网'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件已被保存'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("如果 "),s("code",[t._v("options")]),t._v(" 是字符串，则它指定字符编码：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Node.js 中文网'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("不等待回调就对同一个文件多次使用 "),s("code",[t._v("fs.writeFile()")]),t._v(" 是不安全的。 对于这种情况，建议使用 "),s("a",{attrs:{href:"http://nodejs.cn/s/VdSJQa",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("fs.createWriteStream()")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_7-2fs-writefilesync-file-data-options-同步写入文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-2fs-writefilesync-file-data-options-同步写入文件"}},[t._v("#")]),t._v(" 7.2"),s("code",[t._v("fs.writeFileSync(file, data[, options])")]),t._v("同步写入文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("file")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 文件名或文件描述符。")]),t._v(" "),s("li",[s("code",[t._v("data")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/oh3CkV",target:"_blank",rel:"noopener noreferrer"}},[s("TypedArray",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/yCdVkD",target:"_blank",rel:"noopener noreferrer"}},[s("DataView",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[s("null",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'utf8'")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o666")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("flag")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。 "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'w'")]),t._v("。")])])])]),t._v(" "),s("p",[t._v("返回 "),s("code",[t._v("undefined")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"_8-拷贝文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-拷贝文件"}},[t._v("#")]),t._v(" 8. 拷贝文件")]),t._v(" "),s("h3",{attrs:{id:"_8-1-fs-copyfile-src-dest-mode-callback-异步拷贝文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-fs-copyfile-src-dest-mode-callback-异步拷贝文件"}},[t._v("#")]),t._v(" 8.1 "),s("code",[t._v("fs.copyFile(src, dest[, mode], callback)")]),t._v("异步拷贝文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("src")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" 要拷贝的源文件名。")]),t._v(" "),s("li",[s("code",[t._v("dest")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" 拷贝操作的目标文件名。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 用于拷贝操作的修饰符。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1)])]),t._v(" "),s("p",[t._v("异步地将 "),s("code",[t._v("src")]),t._v(" 拷贝到 "),s("code",[t._v("dest")]),t._v("。 默认情况下，如果 "),s("code",[t._v("dest")]),t._v(" 已经存在，则覆盖它。 除了可能的异常，回调函数没有其他参数。 Node.js 不保证拷贝操作的原子性。 如果在打开目标文件用于写入后发生错误，则 Node.js 将尝试删除目标文件。")]),t._v(" "),s("p",[s("code",[t._v("mode")]),t._v(" 是一个可选的整数，指定拷贝操作的行为。 可以创建由两个或更多个值按位或组成的掩码（比如 "),s("code",[t._v("fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE")]),t._v("）。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("fs.constants.COPYFILE_EXCL")]),t._v(" - 如果 "),s("code",[t._v("dest")]),t._v(" 已存在，则拷贝操作将失败。")]),t._v(" "),s("li",[s("code",[t._v("fs.constants.COPYFILE_FICLONE")]),t._v(" - 拷贝操作将尝试创建写时拷贝（copy-on-write）链接。如果平台不支持写时拷贝，则使用后备的拷贝机制。")]),t._v(" "),s("li",[s("code",[t._v("fs.constants.COPYFILE_FICLONE_FORCE")]),t._v(" - 拷贝操作将尝试创建写时拷贝链接。如果平台不支持写时拷贝，则拷贝操作将失败。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COPYFILE_EXCL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'源文件已拷贝到目标文'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认情况下将创建或覆盖目标文件。")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'源文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'目标文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过使用 COPYFILE_EXCL，如果目标文件存在，则操作将失败。")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'源文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'目标文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COPYFILE_EXCL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_8-2-fs-copyfilesync-src-dest-mode-同步拷贝文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-fs-copyfilesync-src-dest-mode-同步拷贝文件"}},[t._v("#")]),t._v(" 8.2 "),s("code",[t._v("fs.copyFileSync(src, dest[, mode])")]),t._v("同步拷贝文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("src")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" 要拷贝的源文件名。")]),t._v(" "),s("li",[s("code",[t._v("dest")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" 拷贝操作的目标文件名。")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 用于拷贝操作的修饰符。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0")]),t._v("。")])]),t._v(" "),s("p",[t._v("其余同``fs.copyFile(src, dest[, mode], callback)`")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COPYFILE_EXCL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认情况下将创建或覆盖目标文件。")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'源文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'目标文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'源文件已拷贝到目标文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过使用 COPYFILE_EXCL，如果目标文件存在，则操作将失败。")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'源文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'目标文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COPYFILE_EXCL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"_9-重命名文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-重命名文件"}},[t._v("#")]),t._v(" 9.重命名文件")]),t._v(" "),s("h3",{attrs:{id:"_9-1-fs-rename-oldpath-newpath-callback-异步重命名文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-fs-rename-oldpath-newpath-callback-异步重命名文件"}},[t._v("#")]),t._v(" 9.1 "),s("code",[t._v("fs.rename(oldPath, newPath, callback)")]),t._v("异步重命名文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("oldPath")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("newPath")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("err")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/qZ873x",target:"_blank",rel:"noopener noreferrer"}},[s("Error",[s("OutboundLink")],1)],1)])])])]),t._v(" "),s("p",[t._v("异步地把 "),s("code",[t._v("oldPath")]),t._v(" 文件重命名为 "),s("code",[t._v("newPath")]),t._v(" 提供的路径名。 如果 "),s("code",[t._v("newPath")]),t._v(" 已存在，则覆盖它。 除了可能的异常，完成回调没有其他参数。")]),t._v(" "),s("p",[t._v("也可参见 "),s("a",{attrs:{href:"http://nodejs.cn/s/YbqghQ",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("rename(2)")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rename")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'旧文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'新文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'重命名完成'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_9-2-fs-renamesync-oldpath-newpath-callback-同步重命名文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-fs-renamesync-oldpath-newpath-callback-同步重命名文件"}},[t._v("#")]),t._v(" 9.2 "),s("code",[t._v("fs.renameSync(oldPath, newPath, callback)")]),t._v("同步重命名文件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("oldPath")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("newPath")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[t._v("返回 "),s("code",[t._v("undefined")])])]),t._v(" "),s("h2",{attrs:{id:"_10-判断文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-判断文件"}},[t._v("#")]),t._v(" 10.判断文件")]),t._v(" "),s("h3",{attrs:{id:"_10-1-fs-access-path-mode-callback-异步测试文件权限（存在、读写）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-fs-access-path-mode-callback-异步测试文件权限（存在、读写）"}},[t._v("#")]),t._v(" 10.1 "),s("code",[t._v("fs.access(path[, mode], callback)")]),t._v(" 异步测试文件权限（存在、读写）")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("fs.constants.F_OK")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("err")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/qZ873x",target:"_blank",rel:"noopener noreferrer"}},[s("Error",[s("OutboundLink")],1)],1)])])])]),t._v(" "),s("p",[t._v("测试用户对 "),s("code",[t._v("path")]),t._v(" 指定的文件或目录的权限。 "),s("code",[t._v("mode")]),t._v(" 参数是一个可选的整数，指定要执行的可访问性检查。 查看"),s("a",{attrs:{href:"http://nodejs.cn/s/qZfpqk",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件可访问性的常量"),s("OutboundLink")],1),t._v("了解 "),s("code",[t._v("mode")]),t._v(" 的可选值。 可以创建由两个或更多个值按位或组成的掩码（例如 "),s("code",[t._v("fs.constants.W_OK | fs.constants.R_OK")]),t._v("）。")]),t._v(" "),s("p",[t._v("最后一个参数 "),s("code",[t._v("callback")]),t._v(" 是回调函数，调用时会传入可能的错误参数。 如果任何可访问性检查失败，则错误参数会是 "),s("code",[t._v("Error")]),t._v(" 对象。 以下示例会检查 "),s("code",[t._v("package.json")]),t._v(" 是否存在、以及是否可读或可写。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" file "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'package.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查文件是否存在于当前目录中。")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("access")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("F_OK")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'不存在'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'存在'")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查文件是否可读。")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("access")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R_OK")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'不可读'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'可读'")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查文件是否可写。")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("access")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("W_OK")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'不可写'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'可写'")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查文件是否存在于当前目录中、以及是否可写。")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("access")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("F_OK")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("W_OK")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ENOENT'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'不存在'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'只可读'")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" 存在，且可写")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_10-2fs-accesssync-path-mode-同步测试文件权限（存在、读写）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-2fs-accesssync-path-mode-同步测试文件权限（存在、读写）"}},[t._v("#")]),t._v(" 10.2"),s("code",[t._v("fs.accessSync(path[, mode])")]),t._v(" 同步测试文件权限（存在、读写）")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("fs.constants.F_OK")])])]),t._v(" "),s("p",[t._v("同步地测试用户对 "),s("code",[t._v("path")]),t._v(" 指定的文件或目录的权限。 "),s("code",[t._v("mode")]),t._v(" 参数是一个可选的整数，指定要执行的可访问性检查。 查看"),s("a",{attrs:{href:"http://nodejs.cn/s/qZfpqk",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件可访问性的常量"),s("OutboundLink")],1),t._v("了解 "),s("code",[t._v("mode")]),t._v(" 的可选值。 可以创建由两个或更多个值按位或组成的掩码（例如 "),s("code",[t._v("fs.constants.W_OK | fs.constants.R_OK")]),t._v("）。")]),t._v(" "),s("p",[t._v("如果可访问性检查失败，则抛出 "),s("code",[t._v("Error")]),t._v("。 否则，该方法将返回 "),s("code",[t._v("undefined")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("accessSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'etc/passwd'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R_OK")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("W_OK")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'可以读写'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'无权访问'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_10-3-fs-open写入时判断存在是否有效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-3-fs-open写入时判断存在是否有效"}},[t._v("#")]),t._v(" 10.3 "),s("code",[t._v("fs.open")]),t._v("写入时判断存在是否有效")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EEXIST'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件已存在'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeMyData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_10-4-fs-open读取时判断存在文件是否有效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-4-fs-open读取时判断存在文件是否有效"}},[t._v("#")]),t._v(" 10.4 "),s("code",[t._v("fs.open")]),t._v("读取时判断存在文件是否有效")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ENOENT'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件不存在'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readMyData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_10-5-fs-existssync-path-判断文件是否存在"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-5-fs-existssync-path-判断文件是否存在"}},[t._v("#")]),t._v(" 10.5 "),s("code",[t._v("fs.existsSync(path)")]),t._v(" 判断文件是否存在")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[t._v("返回: "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1)])]),t._v(" "),s("p",[t._v("如果路径存在，则返回 "),s("code",[t._v("true")]),t._v("，否则返回 "),s("code",[t._v("false")]),t._v("。")]),t._v(" "),s("p",[t._v("详见此 API 的异步版本的文档："),s("a",{attrs:{href:"http://nodejs.cn/s/udxWhD",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("fs.exists()")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("虽然 "),s("code",[t._v("fs.exists()")]),t._v(" 是弃用的，但 "),s("code",[t._v("fs.existsSync()")]),t._v(" 不是弃用的。 "),s("code",[t._v("fs.exists()")]),t._v(" 的 "),s("code",[t._v("callback")]),t._v(" 参数接受的参数与其他的 Node.js 回调的不一致。 "),s("code",[t._v("fs.existsSync()")]),t._v(" 不使用回调。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("existsSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'该路径已存在'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_11-监听文件的变化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-监听文件的变化"}},[t._v("#")]),t._v(" 11. 监听文件的变化")]),t._v(" "),s("p",[s("img",{attrs:{src:"E:%5Cblog%5Cimages%5Cnode%5Cwatch-code.gif",alt:"监听文件的变化"}})]),t._v(" "),s("h3",{attrs:{id:"_11-1-fs-watch-filename-options-listener-监听文件更改-高效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-1-fs-watch-filename-options-listener-监听文件更改-高效"}},[t._v("#")]),t._v(" 11.1 "),s("code",[t._v("fs.watch(filename[, options][, listener])")]),t._v("监听文件更改(高效)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("filename")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("persistent")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" 指示如果文件已正被监视，进程是否应继续运行。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("true")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("recursive")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" 指示应该监视所有子目录，还是仅监视当前目录。这适用于监视目录时，并且仅适用于受支持的平台（参见"),s("a",{attrs:{href:"http://nodejs.cn/s/PJEx13",target:"_blank",rel:"noopener noreferrer"}},[t._v("注意事项"),s("OutboundLink")],1),t._v("）。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("false")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 指定用于传给监听器的文件名的字符编码。"),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'utf8'")]),t._v("。")])])]),t._v(" "),s("li",[s("code",[t._v("listener")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/8ym6ow",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("undefined")]),t._v("。\n"),s("ul",[s("li",[s("code",[t._v("eventType")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("filename")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1)])])]),t._v(" "),s("li",[t._v("返回: "),s("a",{attrs:{href:"http://nodejs.cn/s/8XNtAD",target:"_blank",rel:"noopener noreferrer"}},[t._v("<fs.FSWatcher>"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("第二个参数是可选的。 如果 "),s("code",[t._v("options")]),t._v(" 传入字符串，则它指定 "),s("code",[t._v("encoding")]),t._v("。 否则， "),s("code",[t._v("options")]),t._v(" 应传入对象。")]),t._v(" "),s("p",[t._v("监听器回调有两个参数 "),s("code",[t._v("(eventType, filename)")]),t._v("。 "),s("code",[t._v("eventType")]),t._v(" 是 "),s("code",[t._v("'rename'")]),t._v(" 或 "),s("code",[t._v("'change'")]),t._v("， "),s("code",[t._v("filename")]),t._v(" 是触发事件的文件的名称。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'somedir'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("eventType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("事件类型是: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("eventType"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("提供的文件名: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("filename"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件名未提供'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("strong",[t._v("使用 "),s("a",{attrs:{href:"http://nodejs.cn/s/h2QY7Q",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("fs.watch()")]),s("OutboundLink")],1),t._v(" 比 "),s("code",[t._v("fs.watchFile")]),t._v(" 和 "),s("code",[t._v("fs.unwatchFile")]),t._v(" 更高效。 应尽可能使用 "),s("code",[t._v("fs.watch")]),t._v(" 代替 "),s("code",[t._v("fs.watchFile")]),t._v(" 和 "),s("code",[t._v("fs.unwatchFile")]),t._v("。")])]),t._v(" "),s("h3",{attrs:{id:"_11-2-fs-watchfile-filename-options-listener-监听文件更改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-fs-watchfile-filename-options-listener-监听文件更改"}},[t._v("#")]),t._v(" 11.2 "),s("code",[t._v("fs.watchFile(filename[, options], listener)")]),t._v("监听文件更改")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("filename")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("bigint")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("false")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("persistent")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("true")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("interval")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("5007")]),t._v("。")])])]),t._v(" "),s("li",[s("code",[t._v("listener")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("current")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/NMuvVx",target:"_blank",rel:"noopener noreferrer"}},[t._v("<fs.State>"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("previous")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/NMuvVx",target:"_blank",rel:"noopener noreferrer"}},[t._v("<fs.State>"),s("OutboundLink")],1)])])])]),t._v(" "),s("p",[t._v("监视 "),s("code",[t._v("filename")]),t._v(" 的更改。 每当访问文件时都会调用 "),s("code",[t._v("listener")]),t._v(" 回调。")]),t._v(" "),s("p",[s("code",[t._v("options")]),t._v(" 参数可以省略。 如果提供，则它应该是一个对象。 "),s("code",[t._v("options")]),t._v(" 对象可以包含一个名为 "),s("code",[t._v("persistent")]),t._v(" 的布尔值，指示当文件正在被监视时，进程是否应该继续运行。 "),s("code",[t._v("options")]),t._v(" 对象可以指定 "),s("code",[t._v("interval")]),t._v(" 属性，指示"),s("strong",[t._v("轮询")]),t._v("目标的频率（以毫秒为单位）。")]),t._v(" "),s("p",[s("code",[t._v("listener")]),t._v(" 有两个参数，当前的 stat 对象和之前的 stat 对象：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message.text'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("curr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prev")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("当前的最近修改时间是: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("curr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mtime"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("之前的最近修改时间是: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("prev"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mtime"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_11-3-fs-unwatchfile-filename-listener-解绑监听器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-fs-unwatchfile-filename-listener-解绑监听器"}},[t._v("#")]),t._v(" 11.3 "),s("code",[t._v("fs.unwatchFile(filename[, listener])")]),t._v(" 解绑监听器")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("filename")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("listener")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[s("Function",[s("OutboundLink")],1)],1),t._v(" 可选的，之前使用 "),s("code",[t._v("fs.watchFile()")]),t._v(" 绑定的监听器。")])]),t._v(" "),s("p",[t._v("停止监视 "),s("code",[t._v("filename")]),t._v(" 的变化。 如果指定了 "),s("code",[t._v("listener")]),t._v("，则仅移除此特定监听器，否则，将移除所有监听器，从而停止监视 "),s("code",[t._v("filename")]),t._v("。")]),t._v(" "),s("p",[t._v("对未被监视的文件名调用 "),s("code",[t._v("fs.unwatchFile()")]),t._v(" 将是空操作，而不是错误。")]),t._v(" "),s("p",[t._v("使用 "),s("a",{attrs:{href:"http://nodejs.cn/s/h2QY7Q",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("fs.watch()")]),s("OutboundLink")],1),t._v(" 比 "),s("code",[t._v("fs.watchFile()")]),t._v(" 和 "),s("code",[t._v("fs.unwatchFile()")]),t._v(" 更高效。 应尽可能使用 "),s("code",[t._v("fs.watch()")]),t._v(" 代替 "),s("code",[t._v("fs.watchFile()")]),t._v(" 和 "),s("code",[t._v("fs.unwatchFile()")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_11-4-为什么推荐fs-watch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-为什么推荐fs-watch"}},[t._v("#")]),t._v(" 11.4 为什么推荐"),s("a",{attrs:{href:"http://nodejs.cn/s/h2QY7Q",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("fs.watch()")]),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://www.jianshu.com/p/09dae09457fa",target:"_blank",rel:"noopener noreferrer"}},[t._v("精读《如何利用 Nodejs 监听文件夹》"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://thisdavej.com/how-to-watch-for-files-changes-in-node-js/",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文《How to Watch for Files Changes in Node.js》"),s("OutboundLink")],1)])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("fs.watchFile")]),t._v(" 是通过轮询检测文件变化的，它并不能实时作出反馈，而且只能监听一个文件，存在效率问题。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("fs.watch")]),t._v(" 通过操作系统提供的文件更改通知机制来监听")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("fs.watch")]),t._v("方式取决于底层操作系统，通知文件系统更改的方法如下：（了解一下）")]),t._v(" "),s("ul",[s("li",[t._v("在 Linux 系统上，使用 "),s("a",{attrs:{href:"http://nodejs.cn/s/d7HYeP",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("inotify(7)")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("li",[t._v("在 BSD 系统上，使用 "),s("a",{attrs:{href:"http://nodejs.cn/s/sKFUBp",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("kqueue(2)")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("li",[t._v("在 macOS 系统上，对文件使用 "),s("a",{attrs:{href:"http://nodejs.cn/s/sKFUBp",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("kqueue(2)")]),s("OutboundLink")],1),t._v("，对目录使用 "),s("a",{attrs:{href:"http://nodejs.cn/s/Asxgry",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("FSEvents")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("li",[t._v("在 SunOS 系统上（包括 Solaris 和 SmartOS），使用"),s("a",{attrs:{href:"http://nodejs.cn/s/bqLYZP",target:"_blank",rel:"noopener noreferrer"}},[t._v("事件端口"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("li",[t._v("在 Windows 系统上，此特性取决于 "),s("a",{attrs:{href:"http://nodejs.cn/s/Tbrfbe",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("ReadDirectoryChangesW")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("li",[t._v("在 Aix 系统上，此特性取决于 "),s("a",{attrs:{href:"http://nodejs.cn/s/uAha9z",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("AHAFS")]),s("OutboundLink")],1),t._v(" 必须启动。")])]),t._v(" "),s("p",[t._v("仍然可以使用 "),s("code",[t._v("fs.watchFile()")]),t._v("，因为它使用 stat 轮询 ，但这种方法较慢且不太可靠。—— 官方说法")])])])]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" event "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"change"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("filename"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" file Changed")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"_12-其他"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12-其他"}},[t._v("#")]),t._v(" 12.其他")]),t._v(" "),s("h3",{attrs:{id:"_11-1-文件路径path-参数解读"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-1-文件路径path-参数解读"}},[t._v("#")]),t._v(" 11.1 文件路径"),s("code",[t._v("path")]),t._v(" 参数解读")]),t._v(" "),s("p",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1),t._v(" ：大多数 "),s("code",[t._v("fs")]),t._v(" 操作接受的文件路径可以指定为字符串、"),s("a",{attrs:{href:"http://nodejs.cn/s/FApxjh",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Buffer")]),s("OutboundLink")],1),t._v("、或 "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("URL")]),s("OutboundLink")],1),t._v(" 对象（使用 "),s("code",[t._v("file:")]),t._v(" 协议）。")]),t._v(" "),s("p",[s("code",[t._v("file:")]),t._v(" URL 始终是绝对路径。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fileUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file:///文件'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileUrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_11-2-文件系统标志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-文件系统标志"}},[t._v("#")]),t._v(" 11.2 "),s("a",{attrs:{href:"http://nodejs.cn/api/fs.html#fs_file_system_flags",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统标志"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[s("p",[t._v("追加"),s("code",[t._v("a")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("code",[t._v("flag")])]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("'a'")])]),t._v(" "),s("td",[t._v("打开文件用于追加。 如果文件不存在，则创建该文件。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'ax'")])]),t._v(" "),s("td",[t._v("类似于 "),s("code",[t._v("'a'")]),t._v("，但如果路径存在，则失败。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'a+'")])]),t._v(" "),s("td",[t._v("打开文件用于读取和追加。 如果文件不存在，则创建该文件。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'ax+'")])]),t._v(" "),s("td",[t._v("类似于 "),s("code",[t._v("'a+'")]),t._v("，但如果路径存在，则失败。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'as'")])]),t._v(" "),s("td",[t._v("打开文件用于追加（在同步模式中）。 如果文件不存在，则创建该文件。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'as+'")])]),t._v(" "),s("td",[t._v("打开文件用于读取和追加（在同步模式中）。 如果文件不存在，则创建该文件。")])])])])]),t._v(" "),s("li",[s("p",[t._v("读取"),s("code",[t._v("r")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("code",[t._v("flag")])]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("'r'")])]),t._v(" "),s("td",[t._v("打开文件用于读取。 如果文件不存在，则会发生异常。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'r+'")])]),t._v(" "),s("td",[t._v("打开文件用于读取和写入。 如果文件不存在，则会发生异常。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'rs+'")])]),t._v(" "),s("td",[t._v("打开文件用于读取和写入（在同步模式中）。 指示操作系统绕过本地的文件系统缓存。")])])])])]),t._v(" "),s("li",[s("p",[t._v("写入"),s("code",[t._v("w")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("code",[t._v("flag")])]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("'w'")])]),t._v(" "),s("td",[t._v("打开文件用于写入。 如果文件不存在则创建文件，如果文件存在则截断文件。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'wx'")])]),t._v(" "),s("td",[t._v("类似于 "),s("code",[t._v("'w'")]),t._v("，但如果路径存在，则失败。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'w+'")])]),t._v(" "),s("td",[t._v("打开文件用于读取和写入。 如果文件不存在则创建文件，如果文件存在则截断文件。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("'wx+'")])]),t._v(" "),s("td",[t._v("类似于 "),s("code",[t._v("'w+'")]),t._v("，但如果路径存在，则失败。")])])])])])]),t._v(" "),s("h2",{attrs:{id:"_13-高级api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-高级api"}},[t._v("#")]),t._v(" 13.高级API")]),t._v(" "),s("h3",{attrs:{id:"_13-1-异步方法升级为promise回调："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-异步方法升级为promise回调："}},[t._v("#")]),t._v(" 13.1 异步方法升级为Promise回调：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("fs.promises.access")]),t._v(" 测试用户对 "),s("code",[t._v("path")]),t._v(" 指定的文件或目录的权限")]),t._v(" "),s("li",[s("code",[t._v("fs.promises.appendFile")]),t._v(" 异步追加数据")]),t._v(" "),s("li",[s("code",[t._v("fs.promises.copyFile")]),t._v(" 异步拷贝文件")]),t._v(" "),s("li",[s("code",[t._v("fs.promises.mkdir")]),t._v(" 异步创建目录")]),t._v(" "),s("li",[s("code",[t._v("fs.promises.mkdtemp")]),t._v(" 异步创建临时目录")]),t._v(" "),s("li",[s("code",[t._v("fs.promises.open")]),t._v(" 异步打开文件")]),t._v(" "),s("li",[s("code",[t._v("fs.promises.readFile")]),t._v("异步读取文件")]),t._v(" "),s("li",[s("code",[t._v("fs.promises.rename")]),t._v(" 异步重命名文件")]),t._v(" "),s("li",[s("code",[t._v("fs.promises.rmdir")]),t._v(" 异步移除文件目录")]),t._v(" "),s("li",[s("code",[t._v("fs.promises.writeFile")]),t._v("异步写入文件")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_13-2-使用stream流式操作文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-使用stream流式操作文件"}},[t._v("#")]),t._v(" 13.2 使用Stream流式操作文件")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://juejin.im/post/5940a9c3128fe1006a0ab176",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js 流: 你需要知道的一切"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"_13-2-1-fs-createreadstream-path-options-创建可读流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-1-fs-createreadstream-path-options-创建可读流"}},[t._v("#")]),t._v(" 13.2.1 "),s("code",[t._v("fs.createReadStream(path[, options])")]),t._v("创建可读流")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("flags")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。 "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'r'")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("null")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("fd")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("null")]),t._v("。如果指定了 "),s("code",[t._v("fd")]),t._v("，则 "),s("code",[t._v("ReadStream")]),t._v(" 会忽略 "),s("code",[t._v("path")]),t._v(" 参数，并且会使用指定的文件描述符")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o666")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("autoClose")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("true")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("emitClose")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("false")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("start")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" 从文件中读取一定范围的字节，而不是读取整个文件")]),t._v(" "),s("li",[s("code",[t._v("end")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("Infinity")]),t._v("。从文件中读取一定范围的字节，而不是读取整个文件")]),t._v(" "),s("li",[s("code",[t._v("highWaterMark")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("64 * 1024")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("fs")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[s("null",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("null")]),t._v("。")])])]),t._v(" "),s("li",[t._v("返回: "),s("a",{attrs:{href:"http://nodejs.cn/s/C3Eioq",target:"_blank",rel:"noopener noreferrer"}},[t._v("<fs.ReadStream>"),s("OutboundLink")],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/vx79o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("可读流"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" readStream"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createReadStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./test/b.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//console.log(readStream);")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//读取文件发生错误事件")]),t._v("\nreadStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'发生异常:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//已打开要读取的文件事件")]),t._v("\nreadStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'open'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件已打开:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//文件已经就位，可用于读取事件")]),t._v("\nreadStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ready'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件已准备好..'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//文件读取中事件·····")]),t._v("\nreadStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'读取文件数据:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//文件读取完成事件")]),t._v("\nreadStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'读取已完成..'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//文件已关闭事件")]),t._v("\nreadStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'close'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件已关闭！'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("h4",{attrs:{id:"_13-2-2-fs-createwritestream-path-options-创建可写流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-2-fs-createwritestream-path-options-创建可写流"}},[t._v("#")]),t._v(" 13.2.2 "),s("code",[t._v("fs.createWriteStream(path[, options])")]),t._v(" 创建可写流")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[s("Buffer",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/5dwq7G",target:"_blank",rel:"noopener noreferrer"}},[s("URL",[s("OutboundLink")],1)],1)]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("flags")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/JjbY8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件系统 "),s("code",[t._v("flag")]),t._v(" 的支持"),s("OutboundLink")],1),t._v("。 "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("'r'")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[s("string",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("null")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("fd")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("null")]),t._v("。如果指定了 "),s("code",[t._v("fd")]),t._v("，则 "),s("code",[t._v("ReadStream")]),t._v(" 会忽略 "),s("code",[t._v("path")]),t._v(" 参数，并且会使用指定的文件描述符")]),t._v(" "),s("li",[s("code",[t._v("mode")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("0o666")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("autoClose")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("true")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("emitClose")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[s("boolean",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("false")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("start")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[s("integer",[s("OutboundLink")],1)],1),t._v("  范围 [0, "),s("a",{attrs:{href:"http://nodejs.cn/s/e9ereu",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Number.MAX_SAFE_INTEGER")]),s("OutboundLink")],1),t._v("]")]),t._v(" "),s("li",[s("code",[t._v("fs")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[s("Object",[s("OutboundLink")],1)],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[s("null",[s("OutboundLink")],1)],1),t._v(" "),s("strong",[t._v("默认值:")]),t._v(" "),s("code",[t._v("null")]),t._v("。")])])])]),t._v(" "),s("ul",[s("li",[t._v("返回: "),s("a",{attrs:{href:"http://nodejs.cn/s/2uZDVA",target:"_blank",rel:"noopener noreferrer"}},[t._v("<fs.WriteStream>"),s("OutboundLink")],1),t._v(" 参见"),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[t._v("可写流"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("h2",{attrs:{id:"_14-小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_14-小结"}},[t._v("#")]),t._v(" 14.小结")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("创建目录")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mkdir\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mkdirSync\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mkdtemp\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mkdtempSync\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mkdir\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mkdtemp\n")])])])]),t._v(" "),s("li",[s("p",[t._v("追加文件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("appendFile\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("appendFileSync\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("appendFile\n")])])])]),t._v(" "),s("li",[s("p",[t._v("打开文件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("open\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("openSync\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("open\n")])])])]),t._v(" "),s("li",[s("p",[t._v("读取文件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readFile\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readFileSync\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readFile\n")])])])]),t._v(" "),s("li",[s("p",[t._v("写入文件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("writeFile\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("writeFileSync\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("writeFile\n")])])])]),t._v(" "),s("li",[s("p",[t._v("拷贝文件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copyFile\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copyFileSync\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copyFile\n")])])])]),t._v(" "),s("li",[s("p",[t._v("重命名文件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rename\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("renameSync\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rename\n")])])])]),t._v(" "),s("li",[s("p",[t._v("判断文件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("access\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accessSync\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("access\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("existsSync\n")])])])]),t._v(" "),s("li",[s("p",[t._v("监听文件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("watch\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("watchFile\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("unwatch\n")])])])])])])}),[],!1,null,null,null);n.default=e.exports}}]);