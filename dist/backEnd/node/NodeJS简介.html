<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【Node】NodeJS简介</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.34d67128.css" as="style"><link rel="preload" href="/assets/js/app.269c0242.js" as="script"><link rel="preload" href="/assets/js/2.b3303c0a.js" as="script"><link rel="preload" href="/assets/js/34.18afc3f7.js" as="script"><link rel="prefetch" href="/assets/js/10.9551f909.js"><link rel="prefetch" href="/assets/js/11.9b9e5937.js"><link rel="prefetch" href="/assets/js/12.db1a0cbe.js"><link rel="prefetch" href="/assets/js/13.247701ca.js"><link rel="prefetch" href="/assets/js/14.a9daeff0.js"><link rel="prefetch" href="/assets/js/15.f0522486.js"><link rel="prefetch" href="/assets/js/16.079f82da.js"><link rel="prefetch" href="/assets/js/17.d12e8a36.js"><link rel="prefetch" href="/assets/js/18.58272faa.js"><link rel="prefetch" href="/assets/js/19.219431c0.js"><link rel="prefetch" href="/assets/js/20.950c0bcb.js"><link rel="prefetch" href="/assets/js/21.b49ea422.js"><link rel="prefetch" href="/assets/js/22.28461d33.js"><link rel="prefetch" href="/assets/js/23.5eb75418.js"><link rel="prefetch" href="/assets/js/24.9ed9bb2d.js"><link rel="prefetch" href="/assets/js/25.e4baccc1.js"><link rel="prefetch" href="/assets/js/26.ba0c6f54.js"><link rel="prefetch" href="/assets/js/27.0b78fa78.js"><link rel="prefetch" href="/assets/js/28.46b339cb.js"><link rel="prefetch" href="/assets/js/29.24f804b2.js"><link rel="prefetch" href="/assets/js/3.0580c567.js"><link rel="prefetch" href="/assets/js/30.4518c0e9.js"><link rel="prefetch" href="/assets/js/31.a91e6cb8.js"><link rel="prefetch" href="/assets/js/32.537ab155.js"><link rel="prefetch" href="/assets/js/33.f3db2748.js"><link rel="prefetch" href="/assets/js/35.0aa5b2c7.js"><link rel="prefetch" href="/assets/js/36.c573641d.js"><link rel="prefetch" href="/assets/js/37.97f89171.js"><link rel="prefetch" href="/assets/js/38.80529342.js"><link rel="prefetch" href="/assets/js/39.e1e52e00.js"><link rel="prefetch" href="/assets/js/4.22ace04f.js"><link rel="prefetch" href="/assets/js/40.e2ed85a1.js"><link rel="prefetch" href="/assets/js/41.a03d532b.js"><link rel="prefetch" href="/assets/js/42.5f4d7601.js"><link rel="prefetch" href="/assets/js/43.5caea9dd.js"><link rel="prefetch" href="/assets/js/44.890a8e09.js"><link rel="prefetch" href="/assets/js/45.e412252e.js"><link rel="prefetch" href="/assets/js/46.1d2592ea.js"><link rel="prefetch" href="/assets/js/47.71842b32.js"><link rel="prefetch" href="/assets/js/48.9ba46774.js"><link rel="prefetch" href="/assets/js/49.23e5abe7.js"><link rel="prefetch" href="/assets/js/5.6fca250f.js"><link rel="prefetch" href="/assets/js/50.c236b214.js"><link rel="prefetch" href="/assets/js/51.02234012.js"><link rel="prefetch" href="/assets/js/52.90a577bb.js"><link rel="prefetch" href="/assets/js/53.b8a05ab0.js"><link rel="prefetch" href="/assets/js/54.8ae1c14a.js"><link rel="prefetch" href="/assets/js/55.bfb13b97.js"><link rel="prefetch" href="/assets/js/56.fb04c1f8.js"><link rel="prefetch" href="/assets/js/57.0426c9db.js"><link rel="prefetch" href="/assets/js/58.57ca5a7c.js"><link rel="prefetch" href="/assets/js/59.6d0d6e28.js"><link rel="prefetch" href="/assets/js/6.41029863.js"><link rel="prefetch" href="/assets/js/60.568a60c9.js"><link rel="prefetch" href="/assets/js/61.c7528b24.js"><link rel="prefetch" href="/assets/js/62.4422c3f4.js"><link rel="prefetch" href="/assets/js/63.274686af.js"><link rel="prefetch" href="/assets/js/64.0ca9ea89.js"><link rel="prefetch" href="/assets/js/65.e7b757a0.js"><link rel="prefetch" href="/assets/js/66.03da0383.js"><link rel="prefetch" href="/assets/js/67.1d397d2f.js"><link rel="prefetch" href="/assets/js/68.79091aeb.js"><link rel="prefetch" href="/assets/js/69.4a09cae5.js"><link rel="prefetch" href="/assets/js/7.49b572ac.js"><link rel="prefetch" href="/assets/js/70.58a9ce18.js"><link rel="prefetch" href="/assets/js/71.f1f43dcb.js"><link rel="prefetch" href="/assets/js/72.8f359e1a.js"><link rel="prefetch" href="/assets/js/73.9f32edaf.js"><link rel="prefetch" href="/assets/js/74.34ab7ec3.js"><link rel="prefetch" href="/assets/js/75.4f0ec4fc.js"><link rel="prefetch" href="/assets/js/76.b44740db.js"><link rel="prefetch" href="/assets/js/77.9fb05ad7.js"><link rel="prefetch" href="/assets/js/78.959c29d0.js"><link rel="prefetch" href="/assets/js/79.af5a8dd1.js"><link rel="prefetch" href="/assets/js/8.45778cc9.js"><link rel="prefetch" href="/assets/js/80.28e02b2c.js"><link rel="prefetch" href="/assets/js/81.2f77bacc.js"><link rel="prefetch" href="/assets/js/82.ae55b51f.js"><link rel="prefetch" href="/assets/js/83.7f388dc3.js"><link rel="prefetch" href="/assets/js/84.bad4bf49.js"><link rel="prefetch" href="/assets/js/9.962dd750.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34d67128.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nodejs简介"><a href="#nodejs简介" class="header-anchor">#</a> NodeJS简介</h1> <p><img src="E:%5Cblog%5Cimages%5Cnode%5Cnodejs.jpg" alt="NodeJS"></p> <h2 id="nodejs之父-ryan-dahl"><a href="#nodejs之父-ryan-dahl" class="header-anchor">#</a> NodeJS之父——Ryan Dahl</h2> <p><img src="http://5b0988e595225.cdn.sohucs.com/images/20180209/169cc889fd1846dba289e177c84b0312.jpeg" alt="Ryan Dahl"></p> <ul><li><p>俄罗斯人</p></li> <li><p>2004，纽约罗彻斯特大学数学系博士</p></li> <li><p>2006，开始做网站开发</p></li> <li><p>2008，高性能web服务器专家：开发应用 ----&gt; 解决性能问题 ---&gt; 事件驱动，异步I/O</p></li> <li><p>2009年2月，NodeJS诞生，它基于<a href="https://www.jianshu.com/p/2d4532888cf5" target="_blank" rel="noopener noreferrer">V8 引擎<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h2 id="nodejs是什么？"><a href="#nodejs是什么？" class="header-anchor">#</a> NodeJS是什么？</h2> <p>NodeJS是一个让js运行在服务器端的开发平台，使js可以像PHP,JSP,Python,Ruby等一样作为服务端开发语言。</p> <p>不同于其他脚本语言：</p> <ul><li>NodeJS不是一门独立的语言，而是js语言开发平台（其他既是语言也是平台）</li> <li>NodeJS不需要依赖Apache\Nginx、IIS等HTTP服务器，没有web容器。</li></ul> <p>NodeJS自身设计哲学：<strong>花最小的硬件成本，追求更高的并发，更高的处理性能</strong>。</p> <h2 id="nodejs特性"><a href="#nodejs特性" class="header-anchor">#</a> NodeJS特性</h2> <h3 id="单线程（single-thread）"><a href="#单线程（single-thread）" class="header-anchor">#</a> 单线程（Single Thread）</h3> <p>在Java，PHP等服务端语言中，会为每一个客户链接创建一个新的线程。每个线程需要耗费大约2MB内存，理论上，一个8GB的服务器可以同时连接的最大用户数为4000个左右。如果想让web应用程序支持更多的用户，就需要增加服务器的数量，那么，web应用程序的硬件成本自然就提升了。</p> <p>NodeJS不为每个客户连接创建一个新的线程，而仅仅使用一个线程。当有用户连接上了，就会触发一个内部事件，通过<strong>非阻塞I/O</strong>、<strong>事件驱动</strong>机制，让<strong>NodeJS程序在宏观上也是并行</strong>的。</p> <p>使用NodeJS,一个8GB内存的web服务器，可以同时处理超过4万用户的连接。此外，使用单线程，操作系统不再有线程创建、销毁的事件开销。</p> <p><img src="E:%5Cblog%5Cimages%5Cnode%5Cmulti-single-process.png" alt="多线程I/O与单线程I/O"></p> <h3 id=""><a href="#" class="header-anchor">#</a></h3> <h3 id="非阻塞i-o（non-blocking-i-o）"><a href="#非阻塞i-o（non-blocking-i-o）" class="header-anchor">#</a> 非阻塞I/O（Non-blocking I/O）</h3> <blockquote><p><a href="https://juejin.im/post/5b94e2995188255c5c45d0ec" target="_blank" rel="noopener noreferrer">如何给女朋友解释什么是IO中的阻塞、非阻塞、同步、异步？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>传统的单线程处理机制中，在访问数据库的时候，要等待数据返回之后再执行其他的操作，即I/O阻塞了代码的执行，极大地降低了代码执行效率。</p> <p>由于NodeJS中采用了非阻塞I/O机制，因此在执行访问数据库的代码之后，将立即转而执行后面的代码，把数据库返回结果的处理代码放在回调函数中，从而提高了程序的执行下效率。</p> <p>当某个I/O执行完毕时，将以事件的形式通知执行I/O操作的线程，线程执行这个时间的回调函数。那么怎么处理异步I/O呢？通过事件循环，不断地检查有没有未处理的事件，依次予以处理。</p> <p><strong>阻塞模式下，一个线程只能处理一项任务；非阻塞模式下，一个线程一直在执行计算，线程的CPU核心利用率是100%</strong>。</p> <h3 id="事件驱动（event-driven）"><a href="#事件驱动（event-driven）" class="header-anchor">#</a> 事件驱动（Event Driven）</h3> <p>在NodeJS中，客户端请求建立连接、提交数据等操作都会触发相应的事件。在node中，一个时刻只能执行一个事件回调函数，但是在执行一个时间回调函数的中途，可以转而处理其他事件，然后返回继续执行原事件的回调函数，这个机制成为**“事件环”**机制。</p> <p><img src="E:%5Cblog%5Cimages%5Cnode%5Cevent-loop.png" alt="事件环"></p> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <p><strong>+ 单线程</strong>，操作系统不再有线程创建、销毁的事件开销。但是如果某一事件进入了但是被I/O阻塞了，那么整个线程就瘫痪了。</p> <p><strong>+ 非阻塞I/O</strong>，解决了单线程被阻塞时的处理方式。通过非阻塞I/O，线程不会等待I/O执行完毕，而是转而执行后面的代码（NodeJS中所有的I/O都是异步的，回调函数）。那么怎么知道前面的一个或多个I/O执行完毕了呢？</p> <p><strong>+ 事件驱动</strong>，通过<strong>事件环</strong>机制，将I/O等操作以事件的形式加入到事件队列中，通过事件环依次调度。</p> <p>三者相辅相成。</p> <ul><li><p><strong>NodeJS善于I/O密集型，不善于计算密集型</strong>。</p> <p>当应用程序需要处理大量并发的I/O，而在客户端发出响应之前，应用程序内部并不需要进行非常复杂的处理的时候，NodeJS就非常适合。</p> <p>NodeJS也非常适合与web socket配合，开发长连接的实时交互应用程序。比如：</p> <ul><li>用户表单收集</li> <li>考试系统</li> <li>聊天室</li> <li>图文直播</li> <li>提供JSON的API。</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.269c0242.js" defer></script><script src="/assets/js/2.b3303c0a.js" defer></script><script src="/assets/js/34.18afc3f7.js" defer></script>
  </body>
</html>
