<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【Node】NodeJS之url模块学习笔记</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.34d67128.css" as="style"><link rel="preload" href="/assets/js/app.269c0242.js" as="script"><link rel="preload" href="/assets/js/2.b3303c0a.js" as="script"><link rel="preload" href="/assets/js/28.46b339cb.js" as="script"><link rel="prefetch" href="/assets/js/10.9551f909.js"><link rel="prefetch" href="/assets/js/11.9b9e5937.js"><link rel="prefetch" href="/assets/js/12.db1a0cbe.js"><link rel="prefetch" href="/assets/js/13.247701ca.js"><link rel="prefetch" href="/assets/js/14.a9daeff0.js"><link rel="prefetch" href="/assets/js/15.f0522486.js"><link rel="prefetch" href="/assets/js/16.079f82da.js"><link rel="prefetch" href="/assets/js/17.d12e8a36.js"><link rel="prefetch" href="/assets/js/18.58272faa.js"><link rel="prefetch" href="/assets/js/19.219431c0.js"><link rel="prefetch" href="/assets/js/20.950c0bcb.js"><link rel="prefetch" href="/assets/js/21.b49ea422.js"><link rel="prefetch" href="/assets/js/22.28461d33.js"><link rel="prefetch" href="/assets/js/23.5eb75418.js"><link rel="prefetch" href="/assets/js/24.9ed9bb2d.js"><link rel="prefetch" href="/assets/js/25.e4baccc1.js"><link rel="prefetch" href="/assets/js/26.ba0c6f54.js"><link rel="prefetch" href="/assets/js/27.0b78fa78.js"><link rel="prefetch" href="/assets/js/29.24f804b2.js"><link rel="prefetch" href="/assets/js/3.0580c567.js"><link rel="prefetch" href="/assets/js/30.4518c0e9.js"><link rel="prefetch" href="/assets/js/31.a91e6cb8.js"><link rel="prefetch" href="/assets/js/32.537ab155.js"><link rel="prefetch" href="/assets/js/33.f3db2748.js"><link rel="prefetch" href="/assets/js/34.18afc3f7.js"><link rel="prefetch" href="/assets/js/35.0aa5b2c7.js"><link rel="prefetch" href="/assets/js/36.c573641d.js"><link rel="prefetch" href="/assets/js/37.97f89171.js"><link rel="prefetch" href="/assets/js/38.80529342.js"><link rel="prefetch" href="/assets/js/39.e1e52e00.js"><link rel="prefetch" href="/assets/js/4.22ace04f.js"><link rel="prefetch" href="/assets/js/40.e2ed85a1.js"><link rel="prefetch" href="/assets/js/41.a03d532b.js"><link rel="prefetch" href="/assets/js/42.5f4d7601.js"><link rel="prefetch" href="/assets/js/43.5caea9dd.js"><link rel="prefetch" href="/assets/js/44.890a8e09.js"><link rel="prefetch" href="/assets/js/45.e412252e.js"><link rel="prefetch" href="/assets/js/46.1d2592ea.js"><link rel="prefetch" href="/assets/js/47.71842b32.js"><link rel="prefetch" href="/assets/js/48.9ba46774.js"><link rel="prefetch" href="/assets/js/49.23e5abe7.js"><link rel="prefetch" href="/assets/js/5.6fca250f.js"><link rel="prefetch" href="/assets/js/50.c236b214.js"><link rel="prefetch" href="/assets/js/51.02234012.js"><link rel="prefetch" href="/assets/js/52.90a577bb.js"><link rel="prefetch" href="/assets/js/53.b8a05ab0.js"><link rel="prefetch" href="/assets/js/54.8ae1c14a.js"><link rel="prefetch" href="/assets/js/55.bfb13b97.js"><link rel="prefetch" href="/assets/js/56.fb04c1f8.js"><link rel="prefetch" href="/assets/js/57.0426c9db.js"><link rel="prefetch" href="/assets/js/58.57ca5a7c.js"><link rel="prefetch" href="/assets/js/59.6d0d6e28.js"><link rel="prefetch" href="/assets/js/6.41029863.js"><link rel="prefetch" href="/assets/js/60.568a60c9.js"><link rel="prefetch" href="/assets/js/61.c7528b24.js"><link rel="prefetch" href="/assets/js/62.4422c3f4.js"><link rel="prefetch" href="/assets/js/63.274686af.js"><link rel="prefetch" href="/assets/js/64.0ca9ea89.js"><link rel="prefetch" href="/assets/js/65.e7b757a0.js"><link rel="prefetch" href="/assets/js/66.03da0383.js"><link rel="prefetch" href="/assets/js/67.1d397d2f.js"><link rel="prefetch" href="/assets/js/68.79091aeb.js"><link rel="prefetch" href="/assets/js/69.4a09cae5.js"><link rel="prefetch" href="/assets/js/7.49b572ac.js"><link rel="prefetch" href="/assets/js/70.58a9ce18.js"><link rel="prefetch" href="/assets/js/71.f1f43dcb.js"><link rel="prefetch" href="/assets/js/72.8f359e1a.js"><link rel="prefetch" href="/assets/js/73.9f32edaf.js"><link rel="prefetch" href="/assets/js/74.34ab7ec3.js"><link rel="prefetch" href="/assets/js/75.4f0ec4fc.js"><link rel="prefetch" href="/assets/js/76.b44740db.js"><link rel="prefetch" href="/assets/js/77.9fb05ad7.js"><link rel="prefetch" href="/assets/js/78.959c29d0.js"><link rel="prefetch" href="/assets/js/79.af5a8dd1.js"><link rel="prefetch" href="/assets/js/8.45778cc9.js"><link rel="prefetch" href="/assets/js/80.28e02b2c.js"><link rel="prefetch" href="/assets/js/81.2f77bacc.js"><link rel="prefetch" href="/assets/js/82.ae55b51f.js"><link rel="prefetch" href="/assets/js/83.7f388dc3.js"><link rel="prefetch" href="/assets/js/84.bad4bf49.js"><link rel="prefetch" href="/assets/js/9.962dd750.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34d67128.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nodejs之url模块学习笔记"><a href="#nodejs之url模块学习笔记" class="header-anchor">#</a> NodeJS之url模块学习笔记</h1> <h2 id="_1-url模块简介"><a href="#_1-url模块简介" class="header-anchor">#</a> 1.URL模块简介</h2> <p><code>url</code> 模块用于处理与解析 URL。 使用方法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//方式一： 引入url模块</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方式二：使用URL类，直接使用构造函数</span>
<span class="token comment">// 解析URL字符串</span>
url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'http://localhost:11014/#/order-agreement-manager?key=reward-distribution#a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 结果如下：</span>
<span class="token punctuation">{</span>
  protocol<span class="token operator">:</span> <span class="token string">'https:'</span><span class="token punctuation">,</span> <span class="token comment">// 协议</span>
  slashes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// </span>
  auth<span class="token operator">:</span> <span class="token string">'user:pass'</span><span class="token punctuation">,</span>
  host<span class="token operator">:</span> <span class="token string">'sub.host.com:8080'</span><span class="token punctuation">,</span> <span class="token comment">// 域名</span>
  port<span class="token operator">:</span> <span class="token string">'8080'</span><span class="token punctuation">,</span> <span class="token comment">// 端口号</span>
  hostname<span class="token operator">:</span> <span class="token string">'sub.host.com'</span><span class="token punctuation">,</span><span class="token comment">// 域名</span>
  hash<span class="token operator">:</span> <span class="token string">'#hash'</span><span class="token punctuation">,</span> <span class="token comment">// 哈希</span>
  search<span class="token operator">:</span> <span class="token string">'?query=string'</span><span class="token punctuation">,</span> 
  query<span class="token operator">:</span> <span class="token string">'query=string'</span><span class="token punctuation">,</span><span class="token comment">// 查询字符串（用querystring.parse解析）或url.searchParams解析</span>
  pathname<span class="token operator">:</span> <span class="token string">'/p/a/t/h'</span><span class="token punctuation">,</span> <span class="token comment">// 路徑名</span>
  path<span class="token operator">:</span> <span class="token string">'/p/a/t/h?query=string'</span><span class="token punctuation">,</span>
  href<span class="token operator">:</span> <span class="token string">'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>URL 字符串是结构化的字符串，包含多个含义不同的组成部分。 解析字符串后返回的 URL 对象，每个属性对应字符串的各个组成部分。</p> <h2 id="_2-构造方法new-url-input-base"><a href="#_2-构造方法new-url-input-base" class="header-anchor">#</a> 2.构造方法new URL(input[, base])</h2> <ul><li><code>input</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="noopener noreferrer"><string><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></string></a> 要解析的绝对或相对的 URL。如果 <code>input</code> 是相对路径，则需要 <code>base</code>。 如果 <code>input</code> 是绝对路径，则忽略 <code>base</code>。</li> <li><code>base</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="noopener noreferrer"><string><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></string></a> | <a href="http://nodejs.cn/s/5dwq7G" target="_blank" rel="noopener noreferrer"><URL><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></URL></a> 如果 <code>input</code> 不是绝对路径，则为要解析的基本 URL。</li></ul> <p>通过将 <code>input</code> 相对于 <code>base</code> 进行解析，创建一个新的 <code>URL</code> 对象。 如果 <code>base</code> 是一个字符串，则解析方法与 <code>new URL(base)</code> 相同。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'/foo'</span><span class="token punctuation">,</span> <span class="token string">'https://example.org/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// https://example.org/foo</span>
</code></pre></div><h2 id="_3-实例属性"><a href="#_3-实例属性" class="header-anchor">#</a> 3.实例属性</h2> <h3 id="_3-1url-hash获取与设置哈希"><a href="#_3-1url-hash获取与设置哈希" class="header-anchor">#</a> 3.1<code>url.hash</code>获取与设置哈希</h3> <ul><li><p>获取哈希</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org/foo#bar#zzz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// #bar#zzz</span>
</code></pre></div></li> <li><p>设置哈希</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org/foo#bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myURL<span class="token punctuation">.</span>hash <span class="token operator">=</span> <span class="token string">'baz'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 https://example.org/foo#baz</span>
</code></pre></div></li></ul> <h3 id="_3-2url-host获取及设置主机部分"><a href="#_3-2url-host获取及设置主机部分" class="header-anchor">#</a> 3.2<code>url.host</code>获取及设置主机部分</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org:81/foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// example.org:81</span>

myURL<span class="token punctuation">.</span>host <span class="token operator">=</span> <span class="token string">'example.com:82'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// https://example.com:82/foo</span>
</code></pre></div><h3 id="_3-3-url-hostname获取及设置-url-的主机名部分"><a href="#_3-3-url-hostname获取及设置-url-的主机名部分" class="header-anchor">#</a> 3.3 <code>url.hostname</code>获取及设置 URL 的主机名部分</h3> <p><code>url.host</code> 和 <code>url.hostname</code> 之间的区别是 <code>url.hostname</code> 不包含端口。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org:81/foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>hostname<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 example.org</span>

myURL<span class="token punctuation">.</span>hostname <span class="token operator">=</span> <span class="token string">'example.com:82'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 https://example.com:81/foo</span>
</code></pre></div><h3 id="_3-4-url-href获取及设置序列化的-url"><a href="#_3-4-url-href获取及设置序列化的-url" class="header-anchor">#</a> 3.4 <code>url.href</code>获取及设置序列化的 URL</h3> <p>获取 <code>href</code> 属性的值等同于调用 <a href="http://nodejs.cn/s/EXzgVB" target="_blank" rel="noopener noreferrer"><code>url.toString()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>将此属性的值设置为新值等同于使用 <a href="http://nodejs.cn/s/a19aPx" target="_blank" rel="noopener noreferrer"><code>new URL(value)</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 创建新的<code>URL</code>对象。 <code>URL</code> 对象的每个属性都将被修改。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org/foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 https://example.org/foo</span>

myURL<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'https://example.com/bar'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 https://example.com/bar</span>
</code></pre></div><h3 id="_3-5-url-origin获取只读的序列化的-url-的-origin"><a href="#_3-5-url-origin获取只读的序列化的-url-的-origin" class="header-anchor">#</a> 3.5 <code>url.origin</code>获取只读的序列化的 URL 的 origin</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org/foo/bar?baz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 https://example.org</span>
</code></pre></div><h3 id="_3-6-url-password获取及设置-url-的密码部分"><a href="#_3-6-url-password获取及设置-url-的密码部分" class="header-anchor">#</a> 3.6 <code>url.password</code>获取及设置 URL 的密码部分</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://abc:xyz@example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 xyz</span>

myURL<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 https://abc:123@example.com</span>
</code></pre></div><h3 id="_3-7-url-pathname获取及设置-url-的路径部分"><a href="#_3-7-url-pathname获取及设置-url-的路径部分" class="header-anchor">#</a> 3.7 <code>url.pathname</code>获取及设置 URL 的路径部分</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org/abc/xyz?123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 /abc/xyz</span>

myURL<span class="token punctuation">.</span>pathname <span class="token operator">=</span> <span class="token string">'/abcdef'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 打印 https://example.org/abcdef?123</span>
</code></pre></div><h3 id="_3-8url-port获取及设置-url-的端口部分"><a href="#_3-8url-port获取及设置-url-的端口部分" class="header-anchor">#</a> 3.8<code>url.port</code>获取及设置 URL 的端口部分</h3> <p>端口值可以是数字或包含 <code>0</code> 到 <code>65535</code>（含）范围内的数字字符串。 将值设置为给定 <code>protocol</code> 的 <code>URL</code> 对象的<strong>默认端口</strong>将会导致 <code>port</code> 值变为空字符串（<code>''</code>）。</p> <p>端口值可以是空字符串，在这种情况下，端口取决于协议/规范：</p> <table><thead><tr><th style="text-align:left;">协议</th> <th style="text-align:left;">端口</th></tr></thead> <tbody><tr><td style="text-align:left;">&quot;ftp&quot;</td> <td style="text-align:left;">21</td></tr> <tr><td style="text-align:left;">&quot;file&quot;</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">&quot;gopher&quot;</td> <td style="text-align:left;">70</td></tr> <tr><td style="text-align:left;">&quot;http&quot;</td> <td style="text-align:left;">80</td></tr> <tr><td style="text-align:left;">&quot;https&quot;</td> <td style="text-align:left;">443</td></tr> <tr><td style="text-align:left;">&quot;ws&quot;</td> <td style="text-align:left;">80</td></tr> <tr><td style="text-align:left;">&quot;wss&quot;</td> <td style="text-align:left;">443</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org:8888'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 8888</span>

<span class="token comment">// 默认端口将自动转换为空字符。</span>
<span class="token comment">// (HTTPS 协议默认端口是 443)</span>
myURL<span class="token punctuation">.</span>port <span class="token operator">=</span> <span class="token string">'443'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印空字符</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 https://example.org/</span>
</code></pre></div><h3 id="_3-9-url-protocol"><a href="#_3-9-url-protocol" class="header-anchor">#</a> 3.9 <code>url.protocol</code></h3> <p>获取及设置 URL 的协议部分。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 https:</span>

myURL<span class="token punctuation">.</span>protocol <span class="token operator">=</span> <span class="token string">'ftp'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 ftp://example.org/</span>
</code></pre></div><p>分配给 <code>protocol</code> 属性的无效协议值将会被忽略。</p> <h3 id="_3-10-url-search获取及设置-url-的序列化查询部分"><a href="#_3-10-url-search获取及设置-url-的序列化查询部分" class="header-anchor">#</a> 3.10 <code>url.search</code>获取及设置 URL 的序列化查询部分</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org/abc?123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 ?123</span>

myURL<span class="token punctuation">.</span>search <span class="token operator">=</span> <span class="token string">'abc=xyz'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 https://example.org/abc?abc=xyz</span>
</code></pre></div><h3 id="_3-11-url-searchparams获取表示-url-查询参数"><a href="#_3-11-url-searchparams获取表示-url-查询参数" class="header-anchor">#</a> 3.11 <code>url.searchParams</code>获取表示 URL 查询参数</h3> <p>获取表示 URL 查询参数的 <a href="http://nodejs.cn/s/AUtfEw" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 对象。 该属性是只读的。 使用 <a href="http://nodejs.cn/s/EgNerx" target="_blank" rel="noopener noreferrer"><code>url.search</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 设置来替换 URL 的整个查询参数。 详见 <a href="http://nodejs.cn/s/AUtfEw" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://example.org/abc?name=123&amp;pwd=456'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1.获取</span>
myURL<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123</span>
myURL<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'pwd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 456</span>

<span class="token comment">// 2.添加</span>
myURL<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'xyz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 https://example.org/abc?name=123&amp;pwd=456&amp;abc=xyz</span>

<span class="token comment">// 3.删除</span>
myURL<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4.更改（没有就添加）</span>
myURL<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 https://example.org/?name=123&amp;pwd=456&amp;a=b</span>
</code></pre></div><h3 id="_3-12-url-username获取及设置-url-的用户名部分"><a href="#_3-12-url-username获取及设置-url-的用户名部分" class="header-anchor">#</a> 3.12 <code>url.username</code>获取及设置 URL 的用户名部分</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://abc:xyz@example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 abc</span>

myURL<span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 https://123:xyz@example.com/</span>
</code></pre></div><h3 id="_3-13-url-tostring"><a href="#_3-13-url-tostring" class="header-anchor">#</a> 3.13 <code>url.toString()</code></h3> <p>在 <code>URL</code> 对象上调用 <code>toString()</code> 方法将返回序列化的 URL。 返回值与 <a href="http://nodejs.cn/s/Feif9B" target="_blank" rel="noopener noreferrer"><code>url.href</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="http://nodejs.cn/s/naUyEW" target="_blank" rel="noopener noreferrer"><code>url.toJSON()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的相同。</p> <h3 id="_3-14-url-tojson-序列化-url"><a href="#_3-14-url-tojson-序列化-url" class="header-anchor">#</a> 3.14 <code>url.toJSON()</code>序列化 URL</h3> <p>在 <code>URL</code> 对象上调用 <code>toJSON()</code> 方法将返回序列化的 URL。 返回值与 <a href="http://nodejs.cn/s/Feif9B" target="_blank" rel="noopener noreferrer"><code>url.href</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="http://nodejs.cn/s/EXzgVB" target="_blank" rel="noopener noreferrer"><code>url.toString()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的相同。</p> <p>当 <code>URL</code> 对象使用 <a href="http://nodejs.cn/s/bmLTNS" target="_blank" rel="noopener noreferrer"><code>JSON.stringify()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 序列化时将自动调用该方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myURLs <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://www.example.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://test.example.org'</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>myURLs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印 [&quot;https://www.example.com/&quot;,&quot;https://test.example.org/&quot;]</span>
</code></pre></div><h2 id="_4-小结"><a href="#_4-小结" class="header-anchor">#</a> 4.小结</h2> <ul><li><p>使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span>
<span class="token comment">// 或者</span>
<span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://www.example.com'</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>方法</p> <div class="language-js extra-class"><pre class="language-js"><code>url<span class="token punctuation">.</span>protocol
url<span class="token punctuation">.</span>hostname 
url<span class="token punctuation">.</span>host
url<span class="token punctuation">.</span>port
url<span class="token punctuation">.</span>href
url<span class="token punctuation">.</span>pathname
url<span class="token punctuation">.</span>hash
url<span class="token punctuation">.</span>search
url<span class="token punctuation">.</span>searchParams
<span class="token operator">...</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.269c0242.js" defer></script><script src="/assets/js/2.b3303c0a.js" defer></script><script src="/assets/js/28.46b339cb.js" defer></script>
  </body>
</html>
